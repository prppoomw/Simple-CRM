<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
	<head>
		<meta charset="UTF-8">
		<title>Customer CRUD</title>
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
	</head>
	<body>
		<div class = "container">
			<h3 align = "center"> CRM </h3>
			<h4 align = "center"> Simple Customer Relationship Management System </h4>
		</div>
		<form id="updateForm">
		    <input type="hidden" id="id" name="id" th:value="${customer.id}">
		    <input type="text" id="firstName" name="firstName" class="form-control mb-4 w-25" placeholder="Enter FirstName" th:value="${customer.firstName}">
		    <input type="text" id="lastName" name="lastName" class="form-control mb-4 w-25" placeholder="Enter LastName" th:value="${customer.lastName}">
		    <input type="number" id="age" name="age" class="form-control mb-4 w-25" placeholder="Enter Age" th:value="${customer.age}">
		    <input type="text" id="address" name="address" class="form-control mb-4 w-25" placeholder="Enter Address" th:value="${customer.address}">
		    <input type="text" id="phoneNumber" name="phoneNumber" class="form-control mb-4 w-25" placeholder="Enter PhoneNumber" th:value="${customer.phoneNumber}">
		    <input type="text" id="email" name="email" class="form-control mb-4 w-25" placeholder="Enter E-mail" th:value="${customer.email}">
		    <button type="button" id="updateButton" class="btn btn-info col-2">Update</button>
		</form>
		<hr>
		<a th:href="@{/customers/list}">Back to Home Page</a>
		
		<script>
		    document.getElementById("updateButton").addEventListener("click", function() {
		        var formData = {
		            id: document.getElementById("id").value,
				    firstName: document.getElementById("firstName").value,
				    lastName: document.getElementById("lastName").value,
				    age: parseInt(document.getElementById("age").value),
				    address: document.getElementById("address").value,
				    phoneNumber: document.getElementById("phoneNumber").value,
				    email: document.getElementById("email").value
		        };
		
		        fetch('/customers/update', {
		            method: 'PUT',
		            headers: {
		                'Content-Type': 'application/json',
		            },
		            body: JSON.stringify(formData),
		        })
		        .then(response => {
		            window.location.href = "/customers/list";
		        })
		    });
		</script>
	</body>
</html>